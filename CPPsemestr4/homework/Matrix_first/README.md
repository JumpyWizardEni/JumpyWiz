#Документация к классу SparseMatrix

##Описание структуры класса
Класс использует двусвязный список без цикла и без указателя на хвост. Изначально матрица инициализируется нулями. Матрица хранит только ненулевые элементы + максимум 1 нулевой элемент (что связано с особенностью алгоритма индексации). Поля класса: 
1. MatrixNode *root - указатель на корень списка
2. size_t rowsSize - количество строк матрицы
3. size_t columnsSize - количество столбцов матрицы

##Описание MatrixNode
Представляте собой вершину, хранящую один номер матрицы. Поля:
1. int row - номер строки
2. int column - номер столбца
3. float number - число матрицы, расположенное по индексам (row, column)
4. MatrixNode *nextNode - указатель на следующую вершину
5. MatrixNode *prevNode - указатель на предыдущую вершину


##Приватные методы

###areSame
```C
bool areSame(float, float) const;
```
Сравнивает числа **a** и **b** с заданной точностью EPSILON;

###newNode
```C
MatrixNode* newNode(MatrixNode, MatrixNode, int, int, float) const
```
Создает новую вершину, корректно настраивает ссылки на предыдущий и следующий элементы. Возвращает указатель на эту вершину.
##Публичные методы

###getNumber
```C
float getNumber(int, int) const;
```
Возвращает число, находящееся в матрице по заданными индексам. Проверяет все ячейки списка (если он не пуст). Если число найдено, оно возвращается. Если нет, возвращается 0. Если список пуст, то все элементы матрицы равны 0, возвращается 0. 

###setNumber
```C
void setNumber(int, int, float);
```
Добавляет заданное число по заданными индексам в матрицу. Если оно нулевое, то его добавлять не нужно. Если ненулевое - пройдем до конца списка и вставим новую вершину.

###getRowsSize
```C
size_t getRowsSize() const;
```
Возвращает количество строк.

###getColumnsSize
```C
size_t getColumnsSize() const;
```
Возвращает количество столбцов.

###operator ==
```C
bool operator ==(const SparseMatrix &) const;
```
Сравнивает 2 матрицы. Достаточно сделать по одному проходу по списку каждой матрицы. Если все элементы равны, то матрицы одинаковы (т.к. все непроверенные элементы нулевые). Возвращает true, если матрицы совпадают, false в противном случае.

###operator !=
```C
bool operator !=(const SparseMatrix &) const;
```
Аналогично ==. Возвращает true, если матрицы различные, false в противном случае.

###operator +
```C
SparseMatrix operator +(const SparseMatrix &) const;
```
Возвращает сумму двух матриц. Создается временная матрица, в которую складываются элементы. В цикле проходим по всем элементам матриц. Если сумма чисел на заданных индексах не равна 0, то добавляем сумму чисел в список матрицу. Ограничение: размеры матриц совпадают.

###operator =
```C
SparseMatrix & operator =(const SparseMatrix &);
```
Копирует правую матрицу в левую. Проходим по всем элементам списка правой матрицы и вызываем метод setNumber. Ограничение: размеры матриц совпадают.

###operator *(Умножение)
```C
SparseMatrix operator *(const SparseMatrix &) const;
```
Возвращает произведение матриц. Ограничение: количество столбцов первой матрицы совпадает с количеством строк второй.


###operator *(Адресная арифметика)

```C
MatrixNode & operator *();
```
Возвращает последнюю вершину списка, если перед этим работала операция + (например /*/*(matrix + 1)). Иначе создает новую вершину и возвращает ее.
```C
SparseMatrix & operator +(int);
```
Метод необходим для корректной работы адресной арифметики. Добавляет в конец списка новую вершину, которая содержит информацию о необходимой строке. Поле column новой вершины равно -1 и необходимо в качестве флага для следующих методов.

```C
MatrixNode & operator [](int);
```
Аналогично operator *.

```C
float & operator [](int);
```
Аналогично operator *.

```C
MatrixNode & operator +(int);
```
Помещает передаваемое значение в поле column.

```C
float & operator *();

```

Ищет вершину, совпадающую с переданными значениями строки с столбца. Если такая вершина найдена, то возвращается указатель на ее поле number, а временная вершина удаляется. Иначе временная вершина становится постоянной и возвращается указатель на ее поле number.

В результате работы возвращается указатель на хранимое число одной из вершин. Если в ходе алгоритма была найдена старая вершина с подходящими индексами, новая вершина, которая хранила временную информацию, удаляется. Иначе созданная вершина становится полноценным элементом списка. При этом в ее поле можно записать 0. В таком случае при последующих обращениях будет возвращаться эта вершина. Таким образом, в матрице будет храниться не более одного нулевого элемента. 

Константные методы в общем аналогичны, но возвращают float по значению и удаляют все созданные временные вершины, используемые для передачи информации о необходимой строке и столбцах.
##Тестирование 
Для тестирования используется библиотека CxxTest. Т.к. ее нужно устанавливать, уже собранные тесты лежат в папке **builded_tests**. В makefile есть цель для сборки тестов.

```Bash
sudo apt update
sudo apt install cxxtest
```